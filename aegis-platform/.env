# ==============================================
# Aegis Risk Management Platform - Environment Configuration
# ==============================================
# Copy this file to .env in the same directory and configure for your environment.
# This file is tailored for the Docker Compose setup.

# ==============================================
# Docker Port Mappings
# ==============================================
# These ports map services from within Docker to your local machine.
BACKEND_PORT_HOST=30641
FRONTEND_PORT_HOST=58533
POSTGRES_PORT_HOST=5432
REDIS_PORT_HOST=6379

# ==============================================
# Frontend Configuration
# ==============================================
# The VITE_API_URL must use the BACKEND_PORT_HOST defined above.
VITE_API_URL=http://localhost:30641/api/v1
VITE_USE_MOCK_API=false
VITE_ENVIRONMENT=production

# ==============================================
# Core Application Settings
# ==============================================
ENVIRONMENT=production
DEBUG=false
APP_NAME="Aegis Risk Management Platform"
APP_VERSION="1.0.0"
LOG_LEVEL=INFO

# ==============================================
# Database (PostgreSQL)
# ==============================================
# These variables are used by the 'db' service in docker-compose.
POSTGRES_DB=aegis_db
POSTGRES_USER=aegis_user
POSTGRES_PASSWORD=aegis_password
# The backend service connects to the database container using the service name 'db'.
# The DATABASE_URL for the backend is constructed internally like so:
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB}

# ==============================================
# Cache (Redis)
# ==============================================
# The backend service connects to the cache container using the service name 'redis'.
# The REDIS_URL for the backend is constructed internally like so:
# REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB_CACHE=1
REDIS_DB_SESSION=2
REDIS_DB_TASKS=3

# ==============================================
# Security & JWT Configuration
# ==============================================
# IMPORTANT: Change these default secrets for a real production environment!
SECRET_KEY=aegis-super-secret-key-change-in-production-2025
JWT_SECRET_KEY=aegis-jwt-secret-key-change-in-production-2025
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ALGORITHM=HS256
ALGORITHM=HS256

# ==============================================
# CORS Configuration
# ==============================================
# Add your frontend domains here. The default matches the FRONTEND_PORT_HOST.
CORS_ORIGINS='["http://localhost:58533", "http://localhost:5173"]'

# ==============================================
# File Upload & Storage
# ==============================================
MAX_FILE_SIZE=52428800
UPLOAD_PATH=/app/uploads
ALLOWED_FILE_TYPES='["pdf", "docx", "txt", "csv", "json", "png", "jpg", "jpeg"]'

# ==============================================
# Logging and Monitoring
# ==============================================
ENABLE_AUDIT_LOGGING=true

# ==============================================
# AI/LLM Provider Configuration
# ==============================================
ENABLE_AI_FEATURES=true
DEFAULT_LLM_PROVIDER=openai
FALLBACK_LLM_PROVIDERS='["litellm", "openrouter"]'
ENABLE_PROVIDER_ROTATION=true
ENABLE_COST_TRACKING=true
DAILY_COST_LIMIT=100.0

# LLM Response Caching
ENABLE_LLM_CACHING=true
LLM_CACHE_TTL_HOURS=24
LLM_CACHE_MAX_MEMORY_MB=500
LLM_CACHE_CLEANUP_INTERVAL_HOURS=1

# OpenAI Configuration
ENABLE_OPENAI=true
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7

# Azure OpenAI Configuration
ENABLE_AZURE_OPENAI=false
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4-turbo

# Google Gemini Configuration
ENABLE_GEMINI=false
GEMINI_API_KEY=
GEMINI_MODEL=gemini-1.5-pro

# Anthropic Claude Configuration
ENABLE_ANTHROPIC=false
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-5-sonnet-20240620

# LiteLLM Configuration (Universal Gateway)
ENABLE_LITELLM=false
LITELLM_API_KEY=

# OpenRouter Configuration
ENABLE_OPENROUTER=false
OPENROUTER_API_KEY=

# DeepSeek
ENABLE_DEEPSEEK=false
DEEPSEEK_API_KEY=

# Cohere
ENABLE_COHERE=false
COHERE_API_KEY=

# Mistral AI
ENABLE_MISTRAL=false
MISTRAL_API_KEY=

# Hugging Face
ENABLE_HUGGINGFACE=false
HUGGINGFACE_API_KEY=

# Together AI
ENABLE_TOGETHER=false
TOGETHER_API_KEY=

# Local AI Providers
ENABLE_OLLAMA=false
OLLAMA_BASE_URL=http://localhost:11434

ENABLE_LMSTUDIO=false
LMSTUDIO_BASE_URL=http://localhost:1234

ENABLE_TEXTGEN=false
TEXTGEN_BASE_URL=http://localhost:5000

# Custom OpenAI-Compatible Endpoint
ENABLE_CUSTOM=false
CUSTOM_BASE_URL=http://localhost:8000
CUSTOM_API_KEY=

# ==============================================
# External Integrations
# ==============================================

# OpenVAS Vulnerability Scanner
ENABLE_OPENVAS=false
OPENVAS_HOST=localhost
OPENVAS_PORT=9390
OPENVAS_USERNAME=
OPENVAS_PASSWORD=

# OpenCTI Threat Intelligence
ENABLE_OPENCTI=false
OPENCTI_URL=http://localhost:8080
OPENCTI_TOKEN=

# ==============================================
# Email Configuration
# ==============================================
ENABLE_EMAIL=false
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true
EMAIL_FROM=noreply@aegis.example.com

# ==============================================
# Microsoft Entra ID (Azure AD) Authentication
# ==============================================
ENABLE_AZURE_AUTH=false
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_TENANT_ID=
