import{r,j as e,ag as h,Z as j,b9 as q,aa as I,ba as L,af as O,bb as B,K as D}from"./react-vendor-B391mDFM.js";import{B as p,C as n,a as d,b as E,c as M,d as $,e as c,P as z,M as _}from"./assessments-Dh2i4b5o.js";import{A as H,b as K}from"./dashboard-iS0ik5g1.js";import"./vendor-BAj2-sgi.js";import"./ui-vendor-BA32w1ww.js";import"./utils-vendor-D-EuUvUy.js";const Q=()=>{const[x,w]=r.useState({}),[C,u]=r.useState(!0),[g,f]=r.useState(null),[N,v]=r.useState(null),[l,y]=r.useState({}),o=async()=>{var t,s;try{u(!0);const a=await _.getProvidersStatus();w(a),f(null)}catch(a){f(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.detail)||"Failed to fetch providers status")}finally{u(!1)}},S=async t=>{try{v(t);const s=await _.testProvider(t,"Hello, this is a test message for the AI provider.");y(a=>({...a,[t]:s}))}catch(s){y(a=>{var i,b;return{...a,[t]:{test_successful:!1,provider_used:t,response:"",response_time:0,cost:0,timestamp:new Date().toISOString(),error:((b=(i=s.response)==null?void 0:i.data)==null?void 0:b.detail)||"Test failed"}}})}finally{v(null)}};r.useEffect(()=>{o();const t=setInterval(o,3e4);return()=>clearInterval(t)},[]);const P=t=>{switch(t){case"healthy":return e.jsx(D,{className:"h-5 w-5 text-green-500"});case"degraded":return e.jsx(j,{className:"h-5 w-5 text-yellow-500"});case"unhealthy":return e.jsx(B,{className:"h-5 w-5 text-red-500"});default:return e.jsx(j,{className:"h-5 w-5 text-gray-500"})}},R=t=>{switch(t){case"healthy":return"bg-green-100 text-green-800";case"degraded":return"bg-yellow-100 text-yellow-800";case"unhealthy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=t=>t.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");if(C)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(h,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Loading AI Providers..."})]})});if(g)return e.jsxs("div",{className:"p-6",children:[e.jsxs(H,{className:"mb-6",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx(K,{children:g})]}),e.jsxs(p,{onClick:o,children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Retry"]})]});const m=Object.entries(x).filter(([t,s])=>s.enabled),F=Object.values(x).reduce((t,s)=>t+s.requests_count,0),T=Object.values(x).reduce((t,s)=>t+s.total_cost,0),k=m.length>0?m.reduce((t,[s,a])=>t+a.success_rate,0)/m.length:0;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Providers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and monitor LLM providers"})]}),e.jsxs(p,{onClick:o,size:"sm",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Providers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.length})]}),e.jsx(q,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.toLocaleString()})]}),e.jsx(I,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Cost"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",T.toFixed(4)]})]}),e.jsx(L,{className:"h-8 w-8 text-orange-500"})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[k.toFixed(1),"%"]})]}),e.jsx(O,{className:"h-8 w-8 text-purple-500"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Object.entries(x).map(([t,s])=>{var a,i;return e.jsxs(n,{className:"relative",children:[e.jsx(E,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[P(s.status),e.jsxs("div",{children:[e.jsx(M,{className:"text-lg",children:A(t)}),e.jsx($,{children:e.jsx(c,{className:R(s.status),variant:"secondary",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]})]}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>S(t),disabled:N===t||!s.enabled,children:N===t?e.jsx(h,{className:"h-4 w-4 animate-spin"}):"Test"})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Requests"}),e.jsx("p",{className:"font-semibold",children:s.requests_count.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"font-semibold",children:[s.success_rate.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Avg Response"}),e.jsxs("p",{className:"font-semibold",children:[s.avg_response_time.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Total Cost"}),e.jsxs("p",{className:"font-semibold",children:["$",s.total_cost.toFixed(4)]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Success Rate"}),e.jsxs("span",{children:[s.success_rate.toFixed(1),"%"]})]}),e.jsx(z,{value:s.success_rate,className:"h-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Capabilities"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.capabilities.supports_streaming&&e.jsx(c,{variant:"outline",className:"text-xs",children:"Streaming"}),s.capabilities.supports_function_calling&&e.jsx(c,{variant:"outline",className:"text-xs",children:"Functions"}),s.capabilities.supports_vision&&e.jsx(c,{variant:"outline",className:"text-xs",children:"Vision"}),s.capabilities.supports_json_mode&&e.jsx(c,{variant:"outline",className:"text-xs",children:"JSON Mode"}),e.jsxs(c,{variant:"outline",className:"text-xs",children:[(s.capabilities.max_context_length/1e3).toFixed(0),"K tokens"]})]})]}),l[t]&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Latest Test Result"}),l[t].test_successful?e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsx("p",{className:"text-green-600",children:"✓ Test successful"}),e.jsxs("p",{children:["Response time: ",(a=l[t].response_time)==null?void 0:a.toFixed(2),"s"]}),e.jsxs("p",{children:["Cost: $",((i=l[t].cost)==null?void 0:i.toFixed(6))||"0.000000"]}),e.jsx("p",{className:"text-gray-600 truncate",children:l[t].response})]}):e.jsxs("p",{className:"text-xs text-red-600",children:["✗ ",l[t].error]})]}),s.cost_tracking&&e.jsx("div",{className:"text-xs text-gray-600",children:e.jsxs("p",{children:["Today: ",s.cost_tracking.daily_requests," requests, $",s.cost_tracking.daily_cost.toFixed(4)]})})]})]},t)})})]})};export{Q as default};
