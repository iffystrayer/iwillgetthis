import{r as n,j as s,ag as h,Z as b,$ as P,aa as R,ba as F,a9 as I,b9 as $}from"./react-vendor-B391mDFM.js";import{B as j,C as c,a as r,P as u,b as g,c as p,d as N,e as k,M as T}from"./assessments-Dh2i4b5o.js";import{A as _,b as w}from"./dashboard-iS0ik5g1.js";import"./vendor-BAj2-sgi.js";import"./ui-vendor-BA32w1ww.js";import"./utils-vendor-D-EuUvUy.js";const H=()=>{const[t,q]=n.useState(null),[A,f]=n.useState(!0),[v,y]=n.useState(null),[B,E]=n.useState("7d"),d=async()=>{var a,e;try{f(!0);const l=await T.getUsageSummary();q(l),y(null)}catch(l){y(((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.detail)||"Failed to fetch AI analytics")}finally{f(!1)}};n.useEffect(()=>{d();const a=setInterval(d,6e4);return()=>clearInterval(a)},[]);const x=a=>a.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),m=a=>{const e=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500","bg-indigo-500","bg-pink-500","bg-yellow-500"];return e[a%e.length]};if(A)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[s.jsx(h,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading AI Analytics..."})]})});if(v)return s.jsxs("div",{className:"p-6",children:[s.jsxs(_,{className:"mb-6",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsx(w,{children:v})]}),s.jsxs(j,{onClick:d,children:[s.jsx(h,{className:"h-4 w-4 mr-2"}),"Retry"]})]});if(!t)return s.jsx("div",{className:"p-6",children:s.jsxs(_,{children:[s.jsx(b,{className:"h-4 w-4"}),s.jsx(w,{children:"No usage data available"})]})});const o=Object.entries(t.provider_breakdown).filter(([a,e])=>e.enabled).sort((a,e)=>e[1].requests_count-a[1].requests_count),C=t.total_requests>0?t.total_cost/t.total_requests:0;return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Analytics"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor AI usage, costs, and performance"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(j,{variant:"outline",size:"sm",children:[s.jsx(P,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(j,{onClick:d,size:"sm",children:[s.jsx(h,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(c,{children:s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_requests.toLocaleString()}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Across ",t.active_providers," providers"]})]}),s.jsx(R,{className:"h-8 w-8 text-blue-500"})]})})}),s.jsx(c,{children:s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Cost"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",t.total_cost.toFixed(4)]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["$",C.toFixed(6)," per request"]})]}),s.jsx(F,{className:"h-8 w-8 text-green-500"})]})})}),s.jsx(c,{children:s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.average_success_rate.toFixed(1),"%"]}),s.jsx("div",{className:"mt-2",children:s.jsx(u,{value:t.average_success_rate,className:"h-2"})})]}),s.jsx(I,{className:"h-8 w-8 text-purple-500"})]})})}),s.jsx(c,{children:s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Providers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.active_providers}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Object.keys(t.provider_breakdown).length," total configured"]})]}),s.jsx($,{className:"h-8 w-8 text-orange-500"})]})})})]}),s.jsxs(c,{children:[s.jsxs(g,{children:[s.jsx(p,{children:"Provider Performance"}),s.jsx(N,{children:"Compare performance metrics across all AI providers"})]}),s.jsx(r,{children:s.jsx("div",{className:"space-y-4",children:o.map(([a,e],l)=>{const i=t.total_requests>0?e.requests_count/t.total_requests*100:0,S=t.total_cost>0?e.total_cost/t.total_cost*100:0;return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${m(l)}`}),s.jsx("span",{className:"font-medium",children:x(a)}),s.jsx(k,{variant:e.status==="healthy"?"default":"secondary",className:"text-xs",children:e.status})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[e.requests_count," requests"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 mb-1",children:"Request Share"}),s.jsxs("p",{className:"font-semibold",children:[i.toFixed(1),"%"]}),s.jsx(u,{value:i,className:"h-2 mt-1"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 mb-1",children:"Cost Share"}),s.jsxs("p",{className:"font-semibold",children:[S.toFixed(1),"%"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["$",e.total_cost.toFixed(4)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 mb-1",children:"Success Rate"}),s.jsxs("p",{className:"font-semibold",children:[e.success_rate.toFixed(1),"%"]}),s.jsx(u,{value:e.success_rate,className:"h-2 mt-1"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 mb-1",children:"Avg Response Time"}),s.jsxs("p",{className:"font-semibold",children:[e.avg_response_time.toFixed(2),"s"]}),e.avg_response_time>5&&s.jsx("p",{className:"text-xs text-yellow-600",children:"âš  Slow"})]})]})]},a)})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(c,{children:[s.jsxs(g,{children:[s.jsx(p,{children:"Cost Breakdown"}),s.jsx(N,{children:"Spending by provider"})]}),s.jsx(r,{children:s.jsx("div",{className:"space-y-3",children:o.map(([a,e],l)=>{const i=t.total_cost>0?e.total_cost/t.total_cost*100:0;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${m(l)}`}),s.jsx("span",{className:"text-sm font-medium",children:x(a)})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-semibold",children:["$",e.total_cost.toFixed(4)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[i.toFixed(1),"%"]})]})]},a)})})})]}),s.jsxs(c,{children:[s.jsxs(g,{children:[s.jsx(p,{children:"Request Volume"}),s.jsx(N,{children:"Requests by provider"})]}),s.jsx(r,{children:s.jsx("div",{className:"space-y-3",children:o.map(([a,e],l)=>{const i=t.total_requests>0?e.requests_count/t.total_requests*100:0;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${m(l)}`}),s.jsx("span",{className:"text-sm font-medium",children:x(a)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-semibold",children:e.requests_count}),s.jsxs("p",{className:"text-xs text-gray-500",children:[i.toFixed(1),"%"]})]})]},a)})})})]})]})]})};export{H as default};
